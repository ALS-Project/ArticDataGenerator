name: Publish To GitHub Repository

on:
  push:
    branches:
      - main

jobs:
  publish:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write

    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 16
      uses: actions/setup-java@v2
      with:
        java-version: '16'
        distribution: 'adopt'

    - name: Generate 1.16.3 data
      run: gradle generateData_1.16.3 -Peula=true

    - name: Push 1.16.3 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.16.3/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.16.3"

    - name: Generate 1.16.4 data
      run: gradle generateData_1.16.4 -Peula=true

    - name: Push 1.16.4 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.16.4/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.16.4"

    - name: Generate 1.16.5 data
      run: gradle generateData_1.16.5 -Peula=true

    - name: Push 1.16.5 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.16.5/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.16.5"

    - name: Generate 1.17 data
      run: gradle generateData_1.17 -Peula=true

    - name: Push 1.17 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.17/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.17"

    - name: Generate 1.17.1 data
      run: gradle generateData_1.17.1 -Peula=true

    - name: Push 1.17.1 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.17.1/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.17.1"

    - name: Generate 1.18 data
      run: gradle generateData_1.18 -Peula=true

    - name: Push 1.18 Data
      uses: cpina/github-action-push-to-another-repository@v1.3
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
      with:
        source-directory: "ArticData/1.18/"
        user-email: "articdata@bot.io"
        destination-github-username: "Articdive"
        destination-repository-name: "ArticData"
        target-branch: "1.18"